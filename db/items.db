DROP TABLE users;
DROP TABLE categories;
DROP TABLE items;
DROP TABLE exchange_history;


CREATE TABLE users(
  user_uuid text primary key, 
  user_id text unique, 
  password text
);

CREATE TABLE items(
  item_uuid integer primary key, 
  item_name text, 
  category_id integer, 
  is_public integer, 
  price integer, 
  on_sale integer,
  image text,
  exchange_items integer,
  user_uuid integer,
  FOREIGN KEY (category_id) REFERENCES categories(category_id),
  FOREIGN KEY (user_uuid) REFERENCES users(user_uuid)
);

CREATE TABLE categories(
  category_id integer primary key,
  category_name text
);

CREATE TABLE exchange_history(
  item_uuid integer,
  history_seq integer,
  candidate_item_uuid integer,
  status text,
  buyer_uuid integer,
  primary key(item_uuid, history_seq, buyer_uuid),
  FOREIGN KEY (item_uuid) REFERENCES items(item_uuid),
  FOREIGN KEY (candidate_item_uuid) REFERENCES users(user_uuid),
  FOREIGN KEY (buyer_uuid) REFERENCES users(user_uuid)
);

INSERT INTO categories VALUES(1, 'fashion');
INSERT INTO categories VALUES(2, 'furniture');
INSERT INTO categories VALUES(3, 'kitchen');
INSERT INTO items VALUES(1, 'jacket', 1, 1, 1000, 1, '../images/default.jpg', 0, 1);
INSERT INTO items VALUES(2, 'shirt', 1, 0, 2000, 1, '../images/default.jpg', 0, 2);
INSERT INTO items VALUES(3, 'skirt', 1, 1, 1500, 1, 'a.jpg', 1, 1);

insert into users values("c41a58af-b827-4cea-966a-634944b212c9", "10000", "12345");
insert into users values("2d707edb-777e-4888-a553-f0896c2a021d", "10001", "12345");
insert into users values("a6b4a761-3083-4696-847a-36f951a43e7c", "10002", "12345");
insert into users values("1a67be39-baf1-4111-8992-242214ef68ef", "10003", "12345");
insert into users values("b33bda50-c312-498f-a56f-da03efb4376b", "10004", "12345");
insert into users values("1dc45a90-6a23-493e-9b97-c0afbc4ad4a2", "10005", "12345");
insert into users values("59f0ff18-79ab-4e1f-aa3d-a8d66871a394", "10006", "12345");
insert into users values("df510edd-0d91-4a04-bbac-2aa8f5b0704d", "10007", "12345");
insert into users values("4de88a6a-d172-4318-be63-435a0faab158", "10008", "12345");
insert into users values("09ccb6cb-6073-46c4-b472-267d298e3023", "10009", "12345");
